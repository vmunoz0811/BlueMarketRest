<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BLUEMARKET</title>
    <link rel="shortcut icon" href="images/logo_BM.png" type="image/x-icon">
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/login.css">

    <meta name="theme-color" content="#2091F9">

    <meta name="title" content="BlueMarket">
    <meta name="description"
          content="">


    <meta property="og:type" content="website">
    <meta property="og:url" content="Maria Luisa Enciso, Daniel Alvarado, Valeria Muñoz">
    <meta property="og:title" content="BlueMarket">
    <meta property="og:description"
          content="">
    <meta property="og:image" content="BlueMarket">

    <meta property="twitter:title" content="BlueMarket">
    <meta property="twitter:description"
          content="">
    <meta property="twitter:image" content="BlueMarket">
    <title>Recargar la billetera</title>
</head>
<body>

<section class="form-register">
    <h4>Recarga tu billetera</h4>
    <form id="wallet">

        fcoins:<input class="controls" type="number" name="fcoins" id="fcoins"
                      placeholder="Cantidad de Fcoins (Recomendado: 0)" min=0 required/>
        <input class="button" type="submit" value="Recargar">
    </form>
    <script>
        name: localStorage.getItem("username").toString();
        const form = document.querySelector("form");

        form.onsubmit = async (e) => {
            e.preventDefault();

            const formData = new FormData(form);
            try {
                let response = await fetch("./api/users/form", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/x-www-form-urlencoded",
                    },
                    body: new URLSearchParams(formData),

                });
                let result = await response.json();
                console.log(result);
                localStorage.removeItem("fcoins");
                localStorage.setItem("fcoins", result.fcoins);
                window.location.href = "./Profile.html";

            } catch (err) {
                console.log(err);
            }

        }
    </script>


    <p><a href="Login.html">¿Ya tienes una cuenta?</a></p>
</section>

</body>
</html>